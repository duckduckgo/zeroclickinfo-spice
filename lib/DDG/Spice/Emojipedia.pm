package DDG::Spice::Emojipedia;

# ABSTRACT: Provide definitions and meanings for emoji characters.

use strict;
use utf8;
use DDG::Spice;

spice is_cached => 1;
spice proxy_cache_valid => "200 1d";

spice wrap_jsonp_callback => 1;

spice to => 'http://api.emojipedia.org/emojis/$1?api_key={{ENV{DDG_SPICE_EMOJIPEDIA_APIKEY}}}';

my $emoji_pattern = "[Â©Â®â€¼â‰â„¢â„¹â†”-â†™â†©-â†ªâŒš-âŒ›âŒ¨ââ©-â³â¸-âºâ“‚â–ª-â–«â–¶â—€â—»-â—¾â˜€-â˜„â˜â˜‘â˜”-â˜•â˜˜â˜ â˜¢-â˜£â˜¦â˜ªâ˜®-â˜¯â˜¸-â˜ºâ™ˆ-â™“â™ â™£â™¥-â™¦â™¨â™»â™¿âš’-âš”âš–-âš—âš™âš›-âšœâš -âš¡âšª-âš«âš°-âš±âš½-âš¾â›„-â›…â›ˆâ›-â›â›‘â›“-â›”â›©-â›ªâ›°-â›µâ›·-â›¸â›ºâ›½âœ‚âœ…âœˆ-âœ‰âœâœ’âœ”âœ–âœâœ¡âœ¨âœ³-âœ´â„â‡âŒââ“-â•â—â£-â¤â•-â—â¡â°â¿â¤´-â¤µâ¬…-â¬‡â¬›-â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™î”ŠğŸ€„ğŸƒğŸ…°-ğŸ…±ğŸ…¾-ğŸ…¿ğŸ†ğŸ†‘-ğŸ†šğŸˆ-ğŸˆ‚ğŸˆšğŸˆ¯ğŸˆ²-ğŸˆºğŸ‰-ğŸ‰‘ğŸŒ€-ğŸŒ¡ğŸŒ¤-ğŸ„ğŸ†-ğŸ“ğŸ–-ğŸ—ğŸ™-ğŸ›ğŸ-ğŸğŸ…-ğŸ†ğŸˆ-ğŸ‰ğŸŒ-ğŸ°ğŸ³-ğŸµğŸ·-ğŸ‘€ğŸ‘„-ğŸ‘…ğŸ‘‘-ğŸ‘¥ğŸ‘ª-ğŸ‘­ğŸ‘¹-ğŸ‘»ğŸ‘½-ğŸ’€ğŸ’„ğŸ’ˆ-ğŸ’©ğŸ’«-ğŸ“½ğŸ“¿-ğŸ”½ğŸ•‰-ğŸ•ğŸ•-ğŸ•§ğŸ•¯-ğŸ•°ğŸ•³-ğŸ•´ğŸ•¶-ğŸ•ºğŸ–‡ğŸ–Š-ğŸ–ğŸ–¤-ğŸ–¥ğŸ–¨ğŸ–±-ğŸ–²ğŸ–¼ğŸ—‚-ğŸ—„ğŸ—‘-ğŸ—“ğŸ—œ-ğŸ—ğŸ—¡ğŸ—£ğŸ—¨ğŸ—¯ğŸ—³ğŸ—º-ğŸ™„ğŸ™ˆ-ğŸ™ŠğŸš€-ğŸš¢ğŸš¤-ğŸš³ğŸš·-ğŸš¿ğŸ›-ğŸ›…ğŸ›‹-ğŸ›’ğŸ› -ğŸ›¥ğŸ›©ğŸ›«-ğŸ›¬ğŸ›°ğŸ›³-ğŸ›¶ğŸ¤-ğŸ¤—ğŸ¤™-ğŸ¤ğŸ¤ -ğŸ¤§ğŸ¤°ğŸ¤³-ğŸ¤¾ğŸ¥€-ğŸ¥‹ğŸ¥-ğŸ¥ğŸ¦€-ğŸ¦‘ğŸ§€]|#âƒ£|0âƒ£|1âƒ£|2âƒ£|3âƒ£|4âƒ£|5âƒ£|6âƒ£|7âƒ£|8âƒ£|9âƒ£|â˜[ğŸ»-ğŸ¿]?|â›¹[ğŸ»-ğŸ¿]?|âœŠ[ğŸ»-ğŸ¿]?|âœ‹[ğŸ»-ğŸ¿]?|âœŒ[ğŸ»-ğŸ¿]?|âœ[ğŸ»-ğŸ¿]?|ğŸ‡¦[ğŸ‡¨-ğŸ‡¬ğŸ‡®ğŸ‡±-ğŸ‡²ğŸ‡´ğŸ‡¶-ğŸ‡ºğŸ‡¼-ğŸ‡½ğŸ‡¿]?|ğŸ‡§[ğŸ‡¦-ğŸ‡§ğŸ‡©-ğŸ‡¯ğŸ‡±-ğŸ‡´ğŸ‡¶-ğŸ‡¹ğŸ‡»-ğŸ‡¼ğŸ‡¾-ğŸ‡¿]?|ğŸ‡¨[ğŸ‡¦ğŸ‡¨-ğŸ‡©ğŸ‡«-ğŸ‡®ğŸ‡°-ğŸ‡µğŸ‡·ğŸ‡º-ğŸ‡¿]?|ğŸ‡©[ğŸ‡ªğŸ‡¬ğŸ‡¯-ğŸ‡°ğŸ‡²ğŸ‡´ğŸ‡¿]?|ğŸ‡ª[ğŸ‡¦ğŸ‡¨ğŸ‡ªğŸ‡¬-ğŸ‡­ğŸ‡·-ğŸ‡º]?|ğŸ‡«[ğŸ‡®-ğŸ‡°ğŸ‡²ğŸ‡´ğŸ‡·]?|ğŸ‡¬[ğŸ‡¦-ğŸ‡§ğŸ‡©-ğŸ‡®ğŸ‡±-ğŸ‡³ğŸ‡µ-ğŸ‡ºğŸ‡¼ğŸ‡¾]?|ğŸ‡­[ğŸ‡°ğŸ‡²-ğŸ‡³ğŸ‡·ğŸ‡¹-ğŸ‡º]?|ğŸ‡®[ğŸ‡¨-ğŸ‡ªğŸ‡±-ğŸ‡´ğŸ‡¶-ğŸ‡¹]?|ğŸ‡¯[ğŸ‡ªğŸ‡²ğŸ‡´-ğŸ‡µ]?|ğŸ‡°[ğŸ‡ªğŸ‡¬-ğŸ‡®ğŸ‡²-ğŸ‡³ğŸ‡µğŸ‡·ğŸ‡¼ğŸ‡¾-ğŸ‡¿]?|ğŸ‡±[ğŸ‡¦-ğŸ‡¨ğŸ‡®ğŸ‡°ğŸ‡·-ğŸ‡»ğŸ‡¾]?|ğŸ‡²[ğŸ‡¦ğŸ‡¨-ğŸ‡­ğŸ‡°-ğŸ‡¿]?|ğŸ‡³[ğŸ‡¦ğŸ‡¨ğŸ‡ª-ğŸ‡¬ğŸ‡®ğŸ‡±ğŸ‡´-ğŸ‡µğŸ‡·ğŸ‡ºğŸ‡¿]?|ğŸ‡´ğŸ‡²?|ğŸ‡µ[ğŸ‡¦ğŸ‡ª-ğŸ‡­ğŸ‡°-ğŸ‡³ğŸ‡·-ğŸ‡¹ğŸ‡¼ğŸ‡¾]?|ğŸ‡¶ğŸ‡¦?|ğŸ‡·[ğŸ‡ªğŸ‡´ğŸ‡¸ğŸ‡ºğŸ‡¼]?|ğŸ‡¸[ğŸ‡¦-ğŸ‡ªğŸ‡¬-ğŸ‡´ğŸ‡·-ğŸ‡¹ğŸ‡»ğŸ‡½-ğŸ‡¿]?|ğŸ‡¹[ğŸ‡¦ğŸ‡¨-ğŸ‡©ğŸ‡«-ğŸ‡­ğŸ‡¯-ğŸ‡´ğŸ‡·ğŸ‡¹ğŸ‡»-ğŸ‡¼ğŸ‡¿]?|ğŸ‡º[ğŸ‡¦ğŸ‡¬ğŸ‡²ğŸ‡¸ğŸ‡¾-ğŸ‡¿]?|ğŸ‡»[ğŸ‡¦ğŸ‡¨ğŸ‡ªğŸ‡¬ğŸ‡®ğŸ‡³ğŸ‡º]?|ğŸ‡¼[ğŸ‡«ğŸ‡¸]?|ğŸ‡½ğŸ‡°?|ğŸ‡¾[ğŸ‡ªğŸ‡¹]?|ğŸ‡¿[ğŸ‡¦ğŸ‡²ğŸ‡¼]?|ğŸ…[ğŸ»-ğŸ¿]?|ğŸ‚[ğŸ»-ğŸ¿]?|ğŸƒ[ğŸ»-ğŸ¿]?|ğŸ„[ğŸ»-ğŸ¿]?|ğŸ‡[ğŸ»-ğŸ¿]?|ğŸŠ[ğŸ»-ğŸ¿]?|ğŸ‹[ğŸ»-ğŸ¿]?|ğŸ‘(â€ğŸ—¨)?|ğŸ‘‚[ğŸ»-ğŸ¿]?|ğŸ‘ƒ[ğŸ»-ğŸ¿]?|ğŸ‘†[ğŸ»-ğŸ¿]?|ğŸ‘‡[ğŸ»-ğŸ¿]?|ğŸ‘ˆ[ğŸ»-ğŸ¿]?|ğŸ‘‰[ğŸ»-ğŸ¿]?|ğŸ‘Š[ğŸ»-ğŸ¿]?|ğŸ‘‹[ğŸ»-ğŸ¿]?|ğŸ‘Œ[ğŸ»-ğŸ¿]?|ğŸ‘[ğŸ»-ğŸ¿]?|ğŸ‘[ğŸ»-ğŸ¿]?|ğŸ‘[ğŸ»-ğŸ¿]?|ğŸ‘[ğŸ»-ğŸ¿]?|ğŸ‘¦[ğŸ»-ğŸ¿]?|ğŸ‘§[ğŸ»-ğŸ¿]?|ğŸ‘¨([ğŸ»-ğŸ¿]|â€(â¤(ï¸(â€(ğŸ‘¨|ğŸ’‹(â€ğŸ‘¨))))|ğŸ‘¨(â€(ğŸ‘¦(â€ğŸ‘¦)?|ğŸ‘§(â€[ğŸ‘¦-ğŸ‘§])?))|ğŸ‘©(â€(ğŸ‘¦(â€ğŸ‘¦)|ğŸ‘§(â€[ğŸ‘¦-ğŸ‘§])?))))?|ğŸ‘©([ğŸ»-ğŸ¿]|â€(â¤(ï¸(â€(ğŸ‘©|ğŸ’‹(â€ğŸ‘©))))|ğŸ‘©(â€(ğŸ‘¦(â€ğŸ‘¦)?|ğŸ‘§(â€[ğŸ‘¦-ğŸ‘§])?))))?|ğŸ‘®[ğŸ»-ğŸ¿]?|ğŸ‘¯[ğŸ»-ğŸ¿]?|ğŸ‘°[ğŸ»-ğŸ¿]?|ğŸ‘±[ğŸ»-ğŸ¿]?|ğŸ‘²[ğŸ»-ğŸ¿]?|ğŸ‘³[ğŸ»-ğŸ¿]?|ğŸ‘´[ğŸ»-ğŸ¿]?|ğŸ‘µ[ğŸ»-ğŸ¿]?|ğŸ‘¶[ğŸ»-ğŸ¿]?|ğŸ‘·[ğŸ»-ğŸ¿]?|ğŸ‘¸[ğŸ»-ğŸ¿]?|ğŸ‘¼[ğŸ»-ğŸ¿]?|ğŸ’[ğŸ»-ğŸ¿]?|ğŸ’‚[ğŸ»-ğŸ¿]?|ğŸ’ƒ[ğŸ»-ğŸ¿]?|ğŸ’…[ğŸ»-ğŸ¿]?|ğŸ’†[ğŸ»-ğŸ¿]?|ğŸ’‡[ğŸ»-ğŸ¿]?|ğŸ’ª[ğŸ»-ğŸ¿]?|ğŸ•µ[ğŸ»-ğŸ¿]?|ğŸ–[ğŸ»-ğŸ¿]?|ğŸ–•[ğŸ»-ğŸ¿]?|ğŸ––[ğŸ»-ğŸ¿]?|ğŸ™…[ğŸ»-ğŸ¿]?|ğŸ™†[ğŸ»-ğŸ¿]?|ğŸ™‡[ğŸ»-ğŸ¿]?|ğŸ™‹[ğŸ»-ğŸ¿]?|ğŸ™Œ[ğŸ»-ğŸ¿]?|ğŸ™[ğŸ»-ğŸ¿]?|ğŸ™[ğŸ»-ğŸ¿]?|ğŸ™[ğŸ»-ğŸ¿]?|ğŸš£[ğŸ»-ğŸ¿]?|ğŸš´[ğŸ»-ğŸ¿]?|ğŸšµ[ğŸ»-ğŸ¿]?|ğŸš¶[ğŸ»-ğŸ¿]?|ğŸ›€[ğŸ»-ğŸ¿]?|ğŸ¤˜[ğŸ»-ğŸ¿]?";
my $trigger_regex = qr/^(${emoji_pattern}(\s+(emoji|emojipedia|meaning))?)|(emojipedia\s+${emoji_pattern})$/;
triggers query_raw => $trigger_regex;

handle query_raw  => sub {
    return unless $_;
    s/^.*(${emoji_pattern}).*$/$1/;
    chomp;
    return $_;
};

1;
